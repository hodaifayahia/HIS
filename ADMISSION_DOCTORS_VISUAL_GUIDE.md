# Admission Form - Doctor Selection Visual Guide

## Form Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ADMISSION CREATION MODAL                       â”‚
â”‚          [Gradient Header: Indigo to Purple]                    â”‚
â”‚    ğŸ¯ Create New Admission                                      â”‚
â”‚    Register a new patient admission to the system              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: Patient Selection
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ Patient *                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [Search patient by name or phone...]                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ âœ… Selected: John Doe                                           â”‚
â”‚ (Auto-creates fiche navette for today)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 2: Admission Type Selection
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¥ Admission Type *                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚ â”‚ ğŸ›¡ï¸  Surgery (Upfront) â”‚  â”‚ â¤ï¸  Nursing (Pay After)â”‚             â”‚
â”‚ â”‚  Surgical...         â”‚  â”‚  Medical care        â”‚             â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                  â”‚
â”‚ (If Surgery selected â¬‡ï¸)                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 3: Doctor Selection (Surgery only)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¨â€âš•ï¸  Doctor *                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ‘¨â€âš•ï¸  Dr. Ahmed Hassan (Cardiology)             [v]          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚ Dropdown Options:                                               â”‚
â”‚ â€¢ ğŸ‘¨â€âš•ï¸  Dr. Ahmed Hassan (Cardiology)                           â”‚
â”‚ â€¢ ğŸ‘¨â€âš•ï¸  Dr. Fatima Medina (Neurology)                           â”‚
â”‚ â€¢ ğŸ‘¨â€âš•ï¸  Dr. Mohamed Ali (Surgery)                               â”‚
â”‚                                                                  â”‚
â”‚ (After doctor selection, prestation search becomes active â¬‡ï¸)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 4: Prestation Selection (Surgery only, filtered by specialty)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â• Initial Prestation *                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [Search prestation for Cardiology...]                       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚ Search Results (Filtered by Cardiology):                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Echocardiography                      | ğŸ·ï¸ ECH | ğŸ’° $150    â”‚ â”‚
â”‚ â”‚ Cardiac Catheterization               | ğŸ·ï¸ CC  | ğŸ’° $500    â”‚ â”‚
â”‚ â”‚ Electrocardiogram (ECG)               | ğŸ·ï¸ ECG | ğŸ’° $50     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚ âœ… Selected: Echocardiography (150 DA)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 5: Consultation Reference (Auto-created)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“„ Consultation Reference: Auto-created for today              â”‚
â”‚                                                                  â”‚
â”‚ Fiche Navette ID: #2024-11-15-001                              â”‚
â”‚ Status: Active                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 6: Submit
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     [Cancel]  [âœ… Create Admission]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## UI Component Hierarchy

```
AdmissionCreateModal
â”œâ”€â”€ Dialog Header
â”‚   â””â”€â”€ Gradient Background (Indigo â†’ Purple)
â”‚       â”œâ”€â”€ Icon Container
â”‚       â”‚   â””â”€â”€ ğŸ¯ Icon
â”‚       â””â”€â”€ Text
â”‚           â”œâ”€â”€ Title: "Create New Admission"
â”‚           â””â”€â”€ Subtitle: "Register a new patient admission..."
â”‚
â”œâ”€â”€ Dialog Content (Form)
â”‚   â”œâ”€â”€ Patient Selection Section
â”‚   â”‚   â”œâ”€â”€ Label (with ğŸ‘¤ icon)
â”‚   â”‚   â”œâ”€â”€ PatientSearch Component
â”‚   â”‚   â”œâ”€â”€ Success Card (when selected)
â”‚   â”‚   â””â”€â”€ Error Text (if validation fails)
â”‚   â”‚
â”‚   â”œâ”€â”€ Admission Type Section
â”‚   â”‚   â”œâ”€â”€ Label (with ğŸ¥ icon)
â”‚   â”‚   â”œâ”€â”€ Radio Button: Surgery
â”‚   â”‚   â”‚   â””â”€â”€ Card Style with Icon
â”‚   â”‚   â”œâ”€â”€ Radio Button: Nursing
â”‚   â”‚   â”‚   â””â”€â”€ Card Style with Icon
â”‚   â”‚   â””â”€â”€ Error Text (if validation fails)
â”‚   â”‚
â”‚   â”œâ”€â”€ Doctor Section (Conditional: v-if="form.type === 'surgery'")
â”‚   â”‚   â”œâ”€â”€ Label (with ğŸ‘¨â€âš•ï¸ icon)
â”‚   â”‚   â”œâ”€â”€ PrimeVue Dropdown
â”‚   â”‚   â”‚   â”œâ”€â”€ Option Template (with icon)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Doctor Name
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Specialization
â”‚   â”‚   â”‚   â””â”€â”€ Value Template (selected display)
â”‚   â”‚   â”œâ”€â”€ Loading Indicator
â”‚   â”‚   â””â”€â”€ Error Text (if validation fails)
â”‚   â”‚
â”‚   â”œâ”€â”€ Prestation Section (Conditional: depends on doctor)
â”‚   â”‚   â”œâ”€â”€ Label (with â• icon)
â”‚   â”‚   â”œâ”€â”€ Warning Card (if no doctor selected)
â”‚   â”‚   â”œâ”€â”€ PrestationSearch Component
â”‚   â”‚   â”‚   â””â”€â”€ Props:
â”‚   â”‚   â”‚       â”œâ”€â”€ specializationFilter (doctor's specialization ID)
â”‚   â”‚   â”‚       â””â”€â”€ placeholder (doctor's specialization name)
â”‚   â”‚   â”œâ”€â”€ Success Card (when selected)
â”‚   â”‚   â””â”€â”€ Error Text (if validation fails)
â”‚   â”‚
â”‚   â””â”€â”€ Fiche Navette Info Section
â”‚       â””â”€â”€ Info Card (with ğŸ“„ icon)
â”‚           â”œâ”€â”€ Reference Number
â”‚           â””â”€â”€ Auto-created Notice
â”‚
â””â”€â”€ Dialog Footer
    â”œâ”€â”€ Cancel Button (Secondary)
    â””â”€â”€ Create Admission Button (Success)
```

## State Management

```javascript
// Form Data
{
  patient_id: '',              // Patient selection
  doctor_id: '',               // Doctor selection (surgery only)
  type: 'nursing',             // 'surgery' or 'nursing'
  initial_prestation_id: '',   // Prestation selection (surgery only)
  fiche_navette_id: ''         // Auto-set after patient selection
}

// UI State
{
  loading: false,              // Form submission
  loadingDoctors: false,       // Doctor fetch
  creatingFiche: false,        // Fiche creation
  errors: {}                   // Validation errors
}

// Selection State
{
  selectedPatient: null,       // Full patient object
  selectedDoctor: null,        // Full doctor object with specialization
  selectedPrestation: null,    // Full prestation object
  currentFicheNavette: null    // Auto-created fiche object
}

// Search State
{
  patientSearchValue: '',      // Patient search query
  prestationSearchValue: ''    // Prestation search query
}
```

## Doctor-Specialization-Prestation Relationship

```
Doctor
â”œâ”€â”€ id: 1
â”œâ”€â”€ user_id: 5
â”œâ”€â”€ specialization_id: 2
â””â”€â”€ specialization: {
    id: 2,
    name: "Cardiology"
  }

        â†“ (filtered by specialization_id)

Prestation (filtered results)
â”œâ”€â”€ id: 10
â”œâ”€â”€ name: "Electrocardiogram"
â”œâ”€â”€ specialization_id: 2
â””â”€â”€ price_with_vat_and_consumables_variant: 150

Prestation (filtered results)
â”œâ”€â”€ id: 11
â”œâ”€â”€ name: "Echocardiography"
â”œâ”€â”€ specialization_id: 2
â””â”€â”€ price_with_vat_and_consumables_variant: 500

        â†“ (user selects)

ficheNavetteItem (created in AdmissionService)
â”œâ”€â”€ fiche_navette_id: 1
â”œâ”€â”€ prestation_id: 11
â”œâ”€â”€ patient_id: 1
â”œâ”€â”€ base_price: 500
â”œâ”€â”€ final_price: 500
â””â”€â”€ status: 'active'
```

## API Request/Response Flow

### 1. Load Doctors
```
GET /api/doctors

Response:
[
  {
    id: 1,
    user: { id: 5, name: "Dr. Ahmed Hassan" },
    specialization: { id: 2, name: "Cardiology" }
  },
  ...
]
```

### 2. Search Prestations (with Filter)
```
GET /api/prestation?search=Echo&specialization_id=2

Response:
[
  {
    id: 10,
    name: "Electrocardiogram (ECG)",
    code: "ECG",
    price_with_vat_and_consumables_variant: 150,
    specialization: { id: 2, name: "Cardiology" }
  },
  {
    id: 11,
    name: "Echocardiography",
    code: "ECHO",
    price_with_vat_and_consumables_variant: 500,
    specialization: { id: 2, name: "Cardiology" }
  }
]
```

### 3. Create Admission
```
POST /api/admissions

Request:
{
  patient_id: 1,
  doctor_id: 1,
  type: "surgery",
  initial_prestation_id: 11,
  fiche_navette_id: 1
}

Response:
{
  data: {
    id: 5,
    patient_id: 1,
    doctor_id: 1,
    type: "surgery",
    fiche_navette_id: 1,
    status: "admitted",
    created_at: "2024-11-15T10:30:00Z"
  }
}
```

## Color Scheme Reference

| Component | Color | Tailwind Class | Usage |
|-----------|-------|---|---|
| Header Background | Indigoâ†’Purple | `tw-from-indigo-600 tw-to-purple-700` | Main header |
| Doctor Icon | Indigo | `tw-text-indigo-600` | Doctor label icon |
| Surgery Type | Amber | `tw-text-amber-600` | Surgery option |
| Nursing Type | Green | `tw-text-green-500` | Nursing option |
| Prestation Icon | Emerald | `tw-text-emerald-600` | Prestation label icon |
| File Icon | Blue | `tw-text-blue-600` | Fiche reference icon |
| Info Background | Blue-50 | `tw-from-blue-50 tw-to-indigo-50` | Info card |
| Success | Green | `tw-bg-green-50 tw-border-green-200` | Success card |
| Warning | Amber | `tw-bg-amber-50 tw-border-amber-200` | Warning card |

## Icons Used

| Icon | Component | Source |
|------|-----------|--------|
| ğŸ¯ | Header | `pi pi-plus-circle` (PrimeVue) |
| ğŸ‘¤ | Patient | `pi pi-user` (PrimeVue) |
| ğŸ¥ | Admission Type | `pi pi-building` (PrimeVue) |
| ğŸ›¡ï¸ | Surgery | (Unicode) |
| â¤ï¸ | Nursing | (Unicode) |
| ğŸ‘¨â€âš•ï¸ | Doctor | `pi pi-user-md` (PrimeVue) |
| â• | Prestation | `pi pi-plus-circle` (PrimeVue) |
| ğŸ“„ | File | `pi pi-file-pdf` (PrimeVue) |
| âœ… | Checkmark | `pi pi-check-circle` (PrimeVue) |

---

**Last Updated**: November 15, 2025
